(()=>{var e={873:(e,t,r)=>{var n=r(325).Symbol;e.exports=n},528:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},120:(e,t,r)=>{var n=r(528),o=r(891);e.exports=function e(t,r,s,i,c){var l=-1,a=t.length;for(s||(s=o),c||(c=[]);++l<a;){var u=t[l];r>0&&s(u)?r>1?e(u,r-1,s,i,c):n(c,u):i||(c[c.length]=u)}return c}},552:(e,t,r)=>{var n=r(873),o=r(659),s=r(350),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):s(e)}},534:(e,t,r)=>{var n=r(552),o=r(346);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},840:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},659:(e,t,r)=>{var n=r(873),o=Object.prototype,s=o.hasOwnProperty,i=o.toString,c=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[c]=r:delete e[c]),o}},891:(e,t,r)=>{var n=r(873),o=r(428),s=r(449),i=n?n.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||o(e)||!!(i&&e&&e[i])}},350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},325:(e,t,r)=>{var n=r(840),o="object"==typeof self&&self&&self.Object===Object&&self,s=n||o||Function("return this")();e.exports=s},176:(e,t,r)=>{var n=r(120),o=1/0;e.exports=function(e){return null!=e&&e.length?n(e,o):[]}},428:(e,t,r)=>{var n=r(534),o=r(346),s=Object.prototype,i=s.hasOwnProperty,c=s.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return o(e)&&i.call(e,"callee")&&!c.call(e,"callee")};e.exports=l},449:e=>{var t=Array.isArray;e.exports=t},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.hooks,t=window.wp.compose,n=window.wp.blockEditor,o=window.wp.components,s=window.wp.element,i=window.wp.data,c=window.lodash;var l=r(176),a=r.n(l);const u=window.wp.i18n,d=window.ReactJSXRuntime;let p=null;window.uichCSSIgnored=[];const h=(0,s.memo)((({attributes:e,setAttributes:t,clientId:r})=>{const[n,i]=(0,s.useState)([]),[c,l]=(0,s.useState)(e.uichCss||"UICHSelector {\n}\n"),a=(0,s.useRef)(),h=(e,t=!1)=>{let r=e?.state?.lint?.marked?.filter((({__annotation:e})=>"error"===e?.severity))?.map((({__annotation:e})=>e?.message));t&&r?.length>0&&(window.uichCSSIgnored=r),r=r?.filter((e=>!window.uichCSSIgnored.includes(e))),i(r),!t&&r?.length>0||l(e?.getValue())};return(0,s.useEffect)((()=>{const t=e.uichCss&&e.className?.includes("uich-")?e.className.split(" ").find((e=>e.includes("uich"))):null;let n="UICHSelector {\n}\n";if(e.uichCss){const r=new RegExp(`.${t}`,"g");n=e.uichCss.replace(r,"UICHSelector")}a.current=wp.CodeMirror(document.getElementById(`editor-${r}`),{value:n,autoCloseBrackets:!0,continueComments:!0,lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,lint:!0,gutters:["CodeMirror-lint-markers"],styleActiveLine:!0,styleActiveSelected:!0,mode:"css",extraKeys:{"Ctrl-Space":"autocomplete","Alt-F":"findPersistent","Cmd-F":"findPersistent"}});const o=()=>{clearTimeout(p),p=setTimeout((()=>{h(a.current)}),100)};return a.current.on("change",o),()=>{a.current.off("change",o)}}),[]),(0,s.useEffect)((()=>{const n=(()=>{if(c?.replace(/\s+/g,"")==="UICHSelector {\n}\n".replace(/\s+/g,""))return e.className?e.className.split(" ").filter((e=>!e.includes("uich-"))).join(" "):e.className;const t=r.substring(0,8),{className:n}=e;return n?.includes("uich-")?n:n?[...n.trim().split(" "),`uich-${t}`].join(" "):`uich-${t}`})(),o=n?.split(" ").find((e=>e.includes("uich"))),s=o?c?.replace(/UICHSelector/g,`.${o}`):c,i=s?.replace(/\s+/g,"")==="UICHSelector {\n}\n".replace(/\s+/g,"");t({uichCss:i?void 0:s,className:n})}),[c]),(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)("div",{id:`editor-${r}`,style:{minHeight:"200px",border:"1px solid #ddd"}}),n.length>0&&(0,d.jsxs)("div",{className:"uich_error",style:{display:"flex",flexDirection:"column",marginTop:"10px",rowGap:"10px",alignItems:"center"},children:[(0,d.jsx)(o.Notice,{status:"error",isDismissible:!1,children:(0,u.__)(" We have detected errors in your CSS code. Click the button below to override the CSS.","uichemy")}),(0,d.jsxs)(o.Button,{variant:"secondary",onClick:()=>h(a.current,!0),style:{width:"max-content",color:"#4B22CC",boxShadow:"inset 0 0 0 1px #4B22CC"},children:[" ",(0,u.__)("Override CSS","uichemy")," "]})]})]})})),m=(0,c.debounce)((()=>{const{getBlocks:e,isTyping:t}=(0,i.select)("core/block-editor");if(t())return;const r=(0,i.select)("core").getEntityRecords("postType","wp_block",{context:"view"}),n=((e,t)=>{if(!e)return"";const r=e=>{const n=[];if("core/block"===e.name&&t){const o=t.find((t=>e.attributes.ref===t.id));if(o?.content){const e=wp.blocks.parse(o.content.raw||o.content);n.push(...e.map((e=>r(e))))}}return e.attributes?.uichCss&&n.push(e.attributes.uichCss),e.innerBlocks?.length>0&&n.push(...e.innerBlocks.map((e=>r(e)))),n},n=e.map((e=>r(e)));return a()(n).join("\n")})(e(),r);(e=>{const t=window.parent.document.querySelector('iframe[name="editor-canvas"]')?.contentWindow,r=t?.document.head||document.head;let n=r.querySelector("#uich-ctm-styles");n||(n=document.createElement("style"),n.setAttribute("id","uich-ctm-styles"),n.type="text/css",r.appendChild(n)),n.textContent!==e&&(n.textContent=e)})(n)}),300);(0,i.subscribe)(m);const f=(0,t.createHigherOrderComponent)((e=>t=>{const{attributes:r,setAttributes:i,isSelected:c,clientId:l,name:a}=t;return/^uagb\/|^core\/|^kadence\/|^generateblocks\//.test(a)?(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(e,{...t}),c&&(0,d.jsx)(n.InspectorControls,{children:(0,d.jsx)(o.PanelBody,{title:"UiChemy Custom CSS",initialOpen:!1,children:(0,d.jsx)(h,{attributes:r,setAttributes:i,clientId:l})})})]}):(0,d.jsx)(e,{...t})}),"withCustomCSSInspector");(0,e.addFilter)("editor.BlockEdit","uichemy-css-field/with-inspector-controls",f),(0,e.addFilter)("blocks.registerBlockType","uichemy-css-field/attribute",((e,t)=>/^uagb\/|^core\/|^kadence\/|^generateblocks\//.test(t)?(e.attributes&&(e.attributes.uichCss={type:"string",default:""}),e):e))})()})();